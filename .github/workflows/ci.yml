---
    name: CI
    
    on:
        pull_request:
            branches: master
    jobs:
        build-and-test:
            name: Build and test
            runs-on: ubuntu-latest
            container: elixir:1.10-alpine
            steps:
                - uses: actions/checkout@v2
                - name: Install build dependencies
                  run: |
                    touch ./secrets/google_credentials.json
                    export GOOGLE_CREDENTIALS=./secrets/google_credentials.json
                    apk add --update bash openssl git
                    mix local.hex --force && mix local.rebar --force
                - name: Install elixir dependencies
                  run: mix deps.get
                - name: Run CI Tests
                  env:
                    MIX_ENV: test
                  run: mix cxi